function scalc(options={}){var init=function(){var calculator=document.getElementById("calculator");if(calculator.innerHTML='<div id="container"><div id="draggable"><div id="window"><div id="topbar"><a href="Close">X</a></div><div id="display"></div><ul><li><a href="Escape">C</a></li><li><a href="%">%</a></li><li><a href="/">/</a></li><li><a href="*">*</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="-">-</a></li><li><a href="4">4</a></li><li><a href="5">5</a></li><li><a href="6">6</a></li><li><a href="+">+</a></li><li><a href="1">1</a></li><li><a href="2">2</a></li><li><a href="3">3</a></li><li><a href="Enter" class="equal">=</a></li><li><a href="0" class="zero">0</a></li><li><a href="." class="dot">.</a></li></ul></div></div></div>',options.modal=!0===options.modal,options.draggable=!1!==options.draggable,!0===options.modal){var $draggable=function(){var e=calculator.querySelector("#container");return{resize:function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||document.body.offsetWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||document.body.offsetHeight;e.style.width=t+"px",e.style.height=i+"px"},move:function(e,t,i){e.style.left=t+"px",e.style.top=i+"px"},startMoving:function(t,i){addClass(e,"cursor-move");var a=(i=i||window.event).clientX,n=i.clientY,o=t.style.top,l=t.style.left,s=parseInt(t.style.width),r=parseInt(t.style.height),c=parseInt(e.style.width),d=parseInt(e.style.height);o=o.replace("px","");var u=a-(l=l.replace("px","")),f=n-o;document.onmousemove=function(e){var i=(e=e||window.event).clientX,a=e.clientY,n=i-u,o=a-f;n<0&&(n=0),o<0&&(o=0),n+s>c&&(n=c-s),o+r>d&&(o=d-r),$draggable.move(t,n,o)}},stopMoving:function(){document.createElement("script");removeClass(e,"cursor-move"),document.onmousemove=function(){}},init:function(){var t=calculator.querySelector("#draggable"),i=function(){var t=document.documentElement.scrollWidth,i=document.documentElement.scrollHeight;e.style.width=t+"px",e.style.height=i+"px"};$draggable.resize(),window.onresize=function(){$draggable.resize()},window.onscroll=function(){i()},t.onmousedown=function(e){var t=calculator.querySelector("#window");i(),this.style.width="480px",this.style.height=t.offsetHeight+"px",!0===options.draggable&&$draggable.startMoving(this,e)},document.onmouseup=function(){!0===options.draggable&&$draggable.stopMoving()}}}}();$draggable.init()}for(var css_class="button-pressed",hasClass=function(e,t){if(e.classList)return e.classList.contains(t);var i=new RegExp("(\\s|^)"+t+"(\\s|$)");return!!e.className.match(i)},addClass=function(e,t){e.classList?e.classList.add(t):hasClass(e,t)||(e.className+=" "+t)},removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(hasClass(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}},display=calculator.querySelector("#display"),memory="",reset=function(){memory="",display.innerHTML=""},insert=function(e){display.innerHTML+="/"===e?"&divide;":e,memory+=e},total=function(){memory=eval(memory)||0,display.innerHTML=memory||""},button=function(e){return calculator.querySelector('a[href="'+e+'"]')},tag=calculator.getElementsByTagName("a"),i=0;i<tag.length;i++)button(tag[i].getAttribute("href")).onclick=function(e){e.preventDefault();var t=this.getAttribute("href");"Enter"===t?total():"Escape"===t?reset():"Close"===t?container.remove():insert(t)},button(tag[i].getAttribute("href")).onmousedown=function(e){e.preventDefault(),addClass(this,css_class)},button(tag[i].getAttribute("href")).onmouseup=function(e){e.preventDefault(),removeClass(this,css_class)};var $key=function(e){return e.key?e.key:String.fromCharCode(e.which||e.keyCode)};document.body.onkeypress=function(e){e.preventDefault();var t=$key(e).replace(/[^0-9\/\*\-\+\.\%]/g,"");t&&insert(t)},document.body.onkeydown=function(e){var t=$key(e),i=button(t);i&&addClass(i,css_class),"Enter"===t?total():"Escape"===t&&reset()},document.body.onkeyup=function(e){var t=$key(e),i=button(t);if(i&&removeClass(i,css_class),"Backspace"===t){var a=display.innerHTML;a=a.substr(0,a.length-1),display.innerHTML=a,memory=a}}};try{init()}catch(e){window.onload=function(){init()}}}
