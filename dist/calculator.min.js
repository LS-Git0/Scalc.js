function calculator(){$(function(){$("#calculator").html('<div class="container"><div class="calculator"><div class="screen"></div><input type="hidden" value=""><ul><li><a href="c">C</a></li><li><a href="%">&#37;</a></li><li><a href="/">&#247;</a></li><li><a href="*">&#215;</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="-">-</a></li><li><a href="4">4</a></li><li><a href="5">5</a></li><li><a href="6">6</a></li><li><a href="+">+</a></li><li><a href="1">1</a></li><li><a href="2">2</a></li><li><a href="3">3</a></li><li><a href="=" class="equal tall">=</a></li><li><a href="0" class="wide shift">0</a></li><li><a href="." class="shift">.</a></li></ul></div></div>').draggable();var memory=$('#calculator input[type="hidden"]'),screen=$("#calculator .screen"),reset=function(){memory.val(""),screen.html("")},insert=function(a){"/"===a?screen.append("&divide;"):screen.append(a),memory.val(memory.val()+a)},total=function(){memory.val(eval(memory.val())),screen.html(memory.val())};$("#calculator a").click(function(a){a.preventDefault();var l=$(this).attr("href");"="===l?total():"c"===l?reset():insert(l)}),$(this).keypress(function(a){var l="",e=a.which?a.which:a.keyCode;l=String.fromCharCode(e),$('#calculator a[href="'+l+'"]').addClass("shadow"),(l=l.replace(/[^0-9\/\*\-\+\.\%]/g,""))?insert(l):13===e&&total()}),$(this).keydown(function(a){var l=a.which?a.which:a.keyCode;27===l?$('#calculator a[href="c"]').addClass("shadow"):13===l&&$('#calculator a[href="="]').addClass("shadow")}),$(this).keyup(function(a){$("#calculator li a").removeClass("shadow");var l=a.which?a.which:a.keyCode;if(27===l)reset();else if(8===l){var e=screen.html();e=e.substr(0,e.length-1),screen.html(e),memory.val(e)}})})}
